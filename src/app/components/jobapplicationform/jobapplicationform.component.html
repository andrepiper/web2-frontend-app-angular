<div class="mt-8 p-10 bg-white">
    <h4 class="text-2xl font-medium mb-8">Apply for the job</h4>
    <form #applicationForm="ngForm" (ngSubmit)="handleSubmit(applicationForm)">
      <div class="flex flex-wrap -mr-4 -ml-4">
        <div class="md:w-1/2 pr-4 pl-4">
          <div>
            <input
              type="file"
              name="file"
              id="resume"
              accept=".pdf,.doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document"
              class="hidden"
              #fileInput
              (change)="handleFileChange(fileInput.files)"
            />
            <div
              id="uploadDiv"
              class="flex flex-col p-4 border border-dashed border-gray-400 rounded-lg text-center cursor-pointer"
              (click)="fileInput.click()"
              [style.pointer-events]="showTickMark ? 'none' : ''"
            >
              <span *ngIf="!showTickMark">
                <fa-icon id="faUploadIcon" [icon]="faCloudUpload" class="text-3xl text-gray-400 mb-2"></fa-icon>
              </span>
              <span *ngIf="showTickMark">
                <app-tickmark class="self-center"></app-tickmark>
              </span>
              <div id="uploadText" class="text-sm text-gray-600">
                {{showTickMark ? 'File ready to be uploaded' : 'Click or drag file to upload'}}
              </div>
            </div>
          </div>
        </div>
        <div class="md:w-1/2 pr-4 pl-4">
          <input name="job_id" [(ngModel)]="applyWithJobId" type="hidden" [value]="job_id" />
          <input name="user_id" [(ngModel)]="applyWithUserId" type="hidden" [value]="user_id" />
          <div class="mb-4">
            <label for="name">Name:</label>
            <input type="text" class="block appearance-none w-full py-1 px-2 mb-1 text-base leading-normal bg-white text-gray-800 border border-gray-200 rounded" id="name" name="name" [(ngModel)]="applyWithName" (ngModelChange)="applyWithName=$event" required>
            <div *ngIf="applicationForm.controls['name']?.invalid && (applicationForm.controls['name'].dirty || applicationForm.controls['name'].touched)" class="relative px-3 py-3 mb-4 border rounded bg-red-200 border-red-300 text-red-800">
              <div *ngIf="applicationForm.controls['name'].errors && applicationForm.controls['name'].hasError('required') ">
                Name is required.
              </div>
            </div>
          </div>     
          <div class="mb-4">
            <label for="email">Email:</label>
            <input type="email" class="block appearance-none w-full py-1 px-2 mb-1 text-base leading-normal bg-white text-gray-800 border border-gray-200 rounded" id="email" name="email" [(ngModel)]="applyWithEmail" (ngModelChange)="applyWithEmail=$event" required>
            <div *ngIf="applicationForm.controls['email']?.invalid && (applicationForm.controls['email'].dirty || applicationForm.controls['email'].touched)" class="relative px-3 py-3 mb-4 border rounded bg-red-200 border-red-300 text-red-800">
              <div *ngIf="applicationForm.controls['email']?.hasError('required')">
                Email is required.
              </div>
              <div *ngIf="applicationForm.controls['email'].errors && !applicationForm.controls['email']?.hasError('required')">
                Invalid email address.
              </div>
            </div>
          </div>
          <div class="mb-4">
            <label for="phone">Phone:</label>
            <input type="tel" class="block appearance-none w-full py-1 px-2 mb-1 text-base leading-normal bg-white text-gray-800 border border-gray-200 rounded" id="phone" name="phone" [(ngModel)]="applyWithPhone" (ngModelChange)="applyWithEmail=$event" required>
            <div *ngIf="applicationForm.controls['phone']?.invalid && (applicationForm.controls['phone'].dirty || applicationForm.controls['phone'].touched)" class="relative px-3 py-3 mb-4 border rounded bg-red-200 border-red-300 text-red-800">
              <div *ngIf="applicationForm.controls['phone'].errors && applicationForm.controls['phone'].hasError('required')">
                Phone is required.
              </div>
            </div>
          </div>
        </div>
      </div>
      <button
        class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"
        type="submit"
        [disabled]="!applicationForm.valid"
      >
        Apply Now
      </button>
    </form>
  </div>